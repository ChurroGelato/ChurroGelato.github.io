{% extends "base.html" %}

{% block main_content %}
{{ post_macros::page_header(title = page.title) }}
<script>
    async function loadVisitorCountries() {
        try {
            const response = await fetch('https://13495561.goatcounter.com/api/v0/stats/ribeirovidal.com', {
                headers: {
                    'Authorization': 'Bearer h22sxv5jkdhi1nzecgpv29xqn1qealkkia9kt917axzhjs5w5dk'
                }
            });
            const data = await response.json();
            const countryStats = data.stats.find(stat => stat.name === 'country');

            if (countryStats) {
                const list = document.getElementById('country-list');
                countryStats.data.forEach(entry => {
                    const li = document.createElement('li');
                    li.textContent = `${entry.name}: ${entry.count}`;
                    list.appendChild(li);
                });
            }
        } catch (error) {
            console.error('Failed to load visitor countries:', error);
        }
    }

    loadVisitorCountries();</script>
{% endblock main_content %}
